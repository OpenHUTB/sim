[carla]  # [mysql] 为section部分
# Carla可执行文件的主目录，即CarlaUE4.exe所在目录
home = data/CARLA_0.9.15
@echo off
chcp 65001
echo ==============================================
echo 🚀 人车模拟器VSCode插件系统 - 一键打包脚本（机器人工程毕设）
echo 打包内容：VSCode+插件+Python+HUTB+MCP+模拟器依赖
echo ==============================================

:: 1. 定义打包路径与文件名
set ROOT_DIR=%cd%/../
set PACK_DIR=%ROOT_DIR%/pack_output/
set ZIP_NAME=人车模拟器开发插件_一键启动版_%date:~0,4%%date:~5,2%%date:~8,2%.zip
set VSCODE_PATH=D:/Software/VSCode-win32-x64-1.80.0  :: 替换为你的VSCode安装路径
set PYTHON_PATH=D:/Python39  :: 替换为你的Python路径（已预装HUTB/MCP）
set PLUGIN_PATH=%ROOT_DIR%/out  :: 插件编译后的运行文件

:: 2. 创建输出目录
if not exist %PACK_DIR% md %PACK_DIR%
echo ✅ 已创建打包输出目录：%PACK_DIR%

:: 3. 复制核心文件到打包目录
echo ✅ 正在复制VSCode本体...
xcopy /s /e /y %VSCODE_PATH% %PACK_DIR%/VSCode/
echo ✅ 正在复制插件运行文件...
xcopy /s /e /y %PLUGIN_PATH% %PACK_DIR%/VSCode/extensions/human-vehicle-sim-plugin/
echo ✅ 正在复制Python+HUTB+MCP依赖...
xcopy /s /e /y %PYTHON_PATH% %PACK_DIR%/Python/
echo ✅ 正在复制人车模拟器SDK与自测脚本...
xcopy /s /e /y %ROOT_DIR%/simulator_deps %PACK_DIR%/simulator_deps/
xcopy /s /e /y %ROOT_DIR%/test %PACK_DIR%/test/

:: 4. 复制一键启动脚本到打包根目录
copy %ROOT_DIR%/pack_script/start_vscode.bat %PACK_DIR%/一键启动_VSCode人车模拟器开发环境.bat /y

:: 5. 打包为ZIP压缩包（使用7z，轻量化压缩，解压即用）
7z a -tzip %PACK_DIR%%ZIP_NAME% %PACK_DIR%/*
echo ==============================================
echo 🎉 打包完成！ZIP包路径：%PACK_DIR%%ZIP_NAME%
echo ✨ 解压后双击【一键启动_VSCode人车模拟器开发环境.bat】即可使用，无需任何配置！
echo ==============================================
pause
