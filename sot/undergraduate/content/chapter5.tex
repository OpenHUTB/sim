%!TEX root = ../../csuthesis_main.tex
\chapter{意图分析算法设计与实现}

\section{意图识别需求分析}

伴随自动驾驶技术持续向前迈进，车辆针对周围环境的感知需求变得更高，传统的目标检测与跟踪算法即便可以给系统赋予交通参与者的空间位置信息，但如果缺少对目标行为趋势更进一步的认识，那么当面临潜在危险时，系统就无法立即作出反应，在复杂的城市交通场景当中，车辆或者行人不会一直沿着规律的路线移动，其可能会出现诸如加快速度接近，骤然改变车道，径直穿越马路之类具有较高风险的举动，此时仅仅依靠那些静止不动的边框信息远远达不到高级别自动驾驶系统所提出的“先知先觉”的要求，所以说，行为意图的剖析与判定成了塑造智能感知体系必不可少的一部分。

在本系统当中，意图识别模块重点针对被系统持续追踪的目标，凭借它在连续帧之间的速度改变以及同本车的相对距离变动状况，来判定这个目标当下的运动趋向及其潜藏风险等级，通过在图像坐标系下算出目标中心点到视野中心的欧几里得距离，并融合目标本身的线速度，就可以做到对诸如“靠近”“远离”“危险靠近”之类动作的判别，这种依靠物理建模而不是深度学习方式创建起来的行为识别模型，其达成过程较为简易，所需运算量也比较小，可以满足自动驾驶系统对于即时性的要求，而且它并不依靠额外的训练数据，所以具备较好的通用性与拓展能力。

在仿真平台Carla所设的Town10与Town01这两个场景当中，系统借助调用车辆和传感器的同步API接口，既能保留图像渲染的即时性，又能得到其他车辆的空间位置及其动态信息。意图识别模块就是把这些基本数据当作输入量，创建起简单而有效的推断规则，针对目标的运动趋向实施及时判断，然后将分析结果用中文文本形式覆盖显示在跟踪框上面，告知“目标正在靠近”“目标渐渐远去”或者“有危险靠近”之类的状况，这样就形成起完整的感知 - 识别 - 反馈循环，进而突出优化系统对于突然发生情况的警报水平和安全保障水平。

意图识别模块一方面补充了系统感知环节中的语义层输出，另一方面也给后面的路径规划及控制逻辑的决策给予了重要参照，它是联系感知和智能决策的关键纽带，对于优化系统整体的智能水平有着重要意义，下一节将会详细论述这个模块的物理建模逻辑以及判别策略。


\section{基于速度与距离变化的意图判别逻辑}

自动驾驶环境下，车辆要随时察觉并认识周边目标（诸如其他车辆，行人）的行为趋向，这样才能及时做出决策及控制反应，若想超越视觉目标跟踪层面进而优化环境感知水准，文章规划并完成了一套依靠速度和距离改变的行为意图判别逻辑部件，该部件可即时判定被跟踪目标针对本车的动向情况，由此给予具备前瞻性的警示作用。
该模块的核心思想是：通过连续帧之间的目标相对位置变化（欧氏距离）和当前帧的目标速度，联合判断其是否存在靠近、远离或危险状态。在具体实现上，系统首先对当前帧目标的边界框进行中心点计算，结合本车视角中心作为参考点，求取目标与本车之间的距离值；随后与上一帧距离进行对比，计算两帧之间的距离变化量（$\Delta d$），并结合目标当前的瞬时速度（$v$）进行意图分类判断。

为提高判别的精度与稳定性，系统设置了多重判别条件，并赋予合理的速度与距离阈值，判别逻辑详见下表：

\begin{table}[htbp]
  \caption{意图识别逻辑表}
  \label{tab:timetable}
  \centering
  \begin{tabular}{ll}
    \toprule
    意图类别 & 判定条件 \\
    \midrule
    目标初始化中 & 当前为首帧，无历史距离 \\
    危险靠近 & 当前帧与本车距离$d$<150m且目标速度$v$>3.0 m/s \\
    目标靠近中 & 距离变化$\Delta d$<-5m且$v$>1.5m/s \\
    目标远离中 & 距离变化$\Delta d$>5m \\
    目标稳定 & 不满足上述任一条件 \\
    \bottomrule
  \end{tabular}
\end{table}

上面这些规则依靠单纯的几何物理指标来执行建模，利于开展植入式部署并实施即时计算，而且规避了深度模型对于大量训练样本的需求，规则判别逻辑具备较好的可解读性，有益于后续的守护和改良。

系统运行时，判别结果通过图形化界面及时叠加显现于目标跟踪框之上，而且用中文文本告知用户当下的意图分析结论，譬如“危险靠近”或者“目标正在远离”，此模块同DeepSORT跟踪模块紧密结合，保证在维持单目标状态下持续跟踪的情况下，达成对动态意图的判别与输出。

后续工作中，可以把现在这种依靠规则的模块拓展成结合规则和学习的混合模型，通过对历史轨迹执行建模来优化行为预测的效果。




\begin{tabular}{l l}
%  \verb|\songti| & {\songti 宋体} \\
%  \verb|\heiti| & {\heiti 黑体} \\
%   \verb|\kaiti| & {\kaiti 楷体}
\end{tabular}
